<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>Hello, World</title>
</head>

<body>

    <h1 class="headline">Конвертер валют</h1>
    <input type="text" class='inputUAH'><span>UAH</span>
    <div class="app">
        <select name="currency" id="currency"></select>
        <button id="convert">конвертировать</button>
    </div>
    <div class="show">
        <div class='text'>Вывод:</div>
        <div class="total"></div>
    </div>
    <style>
        body {
            background-color: lightgreen;
        };
        
        .app {
            display: flex;
        }
        .inputUAH {
            margin-right: 10px;
        }
        .show {
            display: flex;
        }
        .text {
            margin-right: 10px;
        }
    </style>

    <script>

        let currencyList = document.getElementById('currency');
        let convertButton = document.getElementById('convert');
        let total = document.querySelector('.total');
        let inputUAH = document.querySelector('.inputUAH');

        function foo(){
            if (xhr.status === 200){
                const data = JSON.parse(xhr.responseText);

                data.forEach(function(el){
                    const currensyItem = document.createElement('option');
                    currensyItem.innerText = el.txt;
                    currencyList.append(currensyItem);
                    
                }); 

                convertButton.onclick = function(){
                   let index = data.findIndex((el) => el.txt === currencyList.value);
                   let result = `${inputUAH.value / (data[index].rate)} ${data[index].cc}`;
                   total.innerText = result;
                }
            }
        };
        
        const xhr = new XMLHttpRequest();
        xhr.open('GET', 'https://old.bank.gov.ua/NBUStatService/v1/statdirectory/exchange?json');
        xhr.send();
        xhr.onload = foo;

    </script>    
</body>
</html>

