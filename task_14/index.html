<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>Hello, World</title>
</head>

<body>

    <script>

        class Student {

            constructor(name, surname, bdayYear){
                this.name = name,
                this.surname = surname,
                this.bdayYear = bdayYear,
                this.performance = new Array(30),
                this.attendance = new Array(30) 
            }

            present(){

                let index = this.attendance.findIndex((el) => el === undefined);
                console.log(index);
                if (index === -1){
                console.log('Занятия окончены')
                } else {
                this.attendance[index] = true
                } 
            }

            absent(){

                let index = this.attendance.findIndex((el) => el === undefined);
                console.log(index);
                if (index === -1){
                console.log('Занятия окончены')
                } else {
                this.attendance[index] = false;
                } 
            }

            mark(n){

                let index = this.performance.findIndex((el) => el === undefined);
                if (index === -1){
                console.log('Студент выполнил все задания')
                } else {
                this.performance[index] = n;
                }    
            }

            get averageMark(){

                let index = this.performance.findIndex((el) => el === undefined);
                if (index === -1){
                    let marks = this.performance.reduce(function(total, el){
                    return total += el;
                    })
                    return +(marks / 30).toFixed(2);
                } else {
                    let marks = this.performance.reduce(function(total, el){
                    return total += el;
                    })
                    return +(marks / index).toFixed(2);
                }
                
            }

            averageAttendance(){

                let index = this.attendance.findIndex((el) => el === undefined);
                if (index === -1){
                    let evAttendance = this.attendance.reduce(function(total, el){
                    return total += el;
                    })
                    return +(evAttendance / 30).toFixed(2);
                } else {
                    let evAttendance = this.attendance.reduce(function(total, el){
                    return total += el;
                    })
                    return +(evAttendance / index).toFixed(2);
                }
                
            }

            summary(){

                if (this.averageMark >= 9 && this.averageAttendance() >= 0.9){
                    return `Ути какой молодчинка`
                } else if ((this.averageAttendance() < 0.9 && this.averageMark >= 9) || 
                    (this.averageAttendance() > 0.9 && this.averageMark <= 9)){
                    return `Норм, но могло быть и лучше`
                } else if (this.averageMark < 9 && this.averageAttendance() < 0.9){
                    return `Редиска`
                }  
            }
        }


        let harry = new Student('Harry', 'Potter', 1987);

        harry.present();
        harry.present();
        harry.present();
        harry.present();
        harry.absent();
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(8);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(8);
        harry.mark(10);
        harry.mark(10);
        harry.mark(10);
        harry.mark(9);
        harry.mark(10);
        harry.present();
        harry.present();
        harry.present();
        harry.present();
        harry.absent();
        harry.present();
        harry.present();
        harry.present();
        harry.present();
        harry.present();
        harry.present();
        harry.present();
        harry.present();
        harry.present();
        harry.present();
        harry.present();
        harry.present();
        harry.present();
        harry.present();
        harry.present();
        harry.present();
        harry.present();
        harry.present();
        harry.present();
        harry.present();
        harry.present();

        console.log(`Средняя оценка ${harry.averageMark}`);
        console.log(`Средняя посещаемость ${harry.averageAttendance()}`);


        console.log(harry.summary());

        // // заменим цвет фона на красный,
        // document.body.style.background = "red";

        // // а через 15 секунд вернём как было
        // setTimeout(() => document.body.style.background = "green", 3000);

        // setTimeout(() => document.body.style.background = "blue", 6000);
    </script>

    
</body>

</html>